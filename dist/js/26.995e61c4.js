"use strict";(self["webpackChunkedmsvue"]=self["webpackChunkedmsvue"]||[]).push([[26],{8678:function(e,t,o){o.d(t,{Z:function(){return B}});var s=o(3396),i=o(9242),r=o(7139);const a=e=>((0,s.dD)("data-v-ee13a6dc"),e=e(),(0,s.Cn)(),e),n={class:"x y"},l={class:"card elevation-3"},d=a((()=>(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},[(0,s._)("b",null,"Recently Viewed Folders and Documents")])],-1))),c={class:"card-body"},h={key:0,class:"row"},m=["onContextmenu","onClick"],u={key:0},p=["src"],k={key:0,class:"material-symbols-outlined corner-icon",style:{"font-size":"20px"}},w={key:1},f={key:1},_=a((()=>(0,s._)("p",null,"No thumbnails available.",-1))),y=[_];function b(e,t,o,a,_,b){const g=(0,s.up)("center"),C=(0,s.up)("ContextMenu"),v=(0,s.up)("EditFolder"),D=(0,s.up)("EditDocument");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",n,[(0,s._)("div",l,[d,(0,s._)("div",c,[b.filteredRows&&b.filteredRows.length?((0,s.wg)(),(0,s.iD)("div",h,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(b.filteredRows,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"column-md-3 thumbnail-container",onContextmenu:(0,i.iM)((t=>b.showContextMenu(t,e)),["prevent"]),onClick:o=>b.highlistItem(e,t)},["document"==e.type?((0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("img",{src:e.dataUrl,alt:"Thumbnail",style:{width:"150px",height:"200px",margin:"2px"},class:(0,r.C_)({"thumbnail-active":_.isActive==t})},null,10,p),Array.isArray(_.bookmark_documents)&&_.bookmark_documents.includes(e.id)?((0,s.wg)(),(0,s.iD)("span",k,"stars")):(0,s.kq)("",!0)])):((0,s.wg)(),(0,s.iD)("div",w,[Array.isArray(_.bookmark_folders)&&_.bookmark_folders.includes(e.id)?((0,s.wg)(),(0,s.iD)("span",{key:0,class:(0,r.C_)(["material-symbols-outlined",{"thumbnail-active":_.isActive==e.id}]),style:{"font-size":"200px"}},"folder_special",2)):((0,s.wg)(),(0,s.iD)("span",{key:1,class:(0,r.C_)(["material-symbols-outlined",{"thumbnail-active":_.isActive==e.id}]),style:{"font-size":"200px"}},"folder",2))])),(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s._)("span",null,(0,r.zw)(e.name),1)])),_:2},1024),(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s._)("span",null,(0,r.zw)(e.size)+" MB",1)])),_:2},1024),(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s._)("span",null,(0,r.zw)(new Date(e.updated_at).toLocaleString({dateStyle:"short",timeStyle:"short"})),1)])),_:2},1024),"document"==e.type?((0,s.wg)(),(0,s.j4)(g,{key:2},{default:(0,s.w5)((()=>[(0,s._)("span",null,"Document Version: "+(0,r.zw)(e.version),1)])),_:2},1024)):(0,s.kq)("",!0)],40,m)))),128))])):((0,s.wg)(),(0,s.iD)("div",f,y))])])]),_.showMenu?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"context_overlay",onClick:t[0]||(t[0]=(...e)=>b.closeContextMenu&&b.closeContextMenu(...e))})):(0,s.kq)("",!0),_.showMenu?((0,s.wg)(),(0,s.j4)(C,{key:1,actions:_.contextMenuActions,onActionClicked:b.handleActionClick,x:_.menuX,y:_.menuY},null,8,["actions","onActionClicked","x","y"])):(0,s.kq)("",!0),_.showEditFolder?((0,s.wg)(),(0,s.j4)(v,{key:2,editFolder:_.editFolder,onCloseModal:b.closeModalHandler,folders:o.folders,onGetFolder:b.refreshData},null,8,["editFolder","onCloseModal","folders","onGetFolder"])):(0,s.kq)("",!0),_.showEditDocument?((0,s.wg)(),(0,s.j4)(D,{key:3,editDocument:_.editDocument,onCloseModal:b.closeModalHandler,folders:o.folders,onGetFolder:b.refreshData},null,8,["editDocument","onCloseModal","folders","onGetFolder"])):(0,s.kq)("",!0)],64)}o(4224),o(1121),o(7133),o(560);var g=o(4870),C=o(3535),v=o(8003),D=o(6138),x=o(6733),M={components:{ContextMenu:C.Z,EditFolder:D.Z,EditDocument:x.Z},props:{documents:Array,folders:Array,pagination:Object},data(){return{baseUrl:this.baseApiUrl,token:localStorage.getItem("edms_token"),showMenu:(0,g.iH)(!1),menuX:(0,g.iH)(0),menuY:(0,g.iH)(0),targetRow:(0,g.iH)({}),contextMenuActions:(0,g.iH)([{label:"Open",action:"open"},{label:"Edit",action:"edit"},{label:"Delete",action:"delete"},{label:"Bookmark",action:"bookmark"}]),isActive:null,thumbnails:[],bookmark_documents:[],bookmark_folders:[],thumbnail:"",editFolder:(0,g.iH)({}),showEditFolder:(0,g.iH)(!1),editDocument:(0,g.iH)({}),showEditDocument:(0,g.iH)(!1)}},watch:{"$props.documents":{immediate:!0,handler(e){this.thumbnails=[],e.forEach((e=>{this.parseFile(e)}))}}},computed:{filteredRows(){let e=this.$props.folders;return e.forEach((e=>{e["name"]=e.name?e.name:"",e["dataurl"]=null,e["type"]="folder"})),this.thumbnails.concat(e)}},mounted(){this.bookmark_documents=this.fetchDocumentBookmarks(),this.bookmark_folders=this.fetchFolderBookmarks()},methods:{async parseFile(e){try{let t=e.document_versions.find((e=>1==e.main_file)).physical_path,o=this.baseUrl+"/api/showPdf/"+t.split("/")[2];const s=await fetch(o,{method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,POST,PATCH,OPTIONS"}}),i=await s.arrayBuffer(),r=await v.getDocument({data:new Uint8Array(i)}).promise,a=await r.getPage(1),n=a.getViewport({scale:1}),l=document.createElement("canvas"),d=l.getContext("2d");l.width=n.width,l.height=n.height;const c={canvasContext:d,viewport:n};await a.render(c).promise;const h=l.toDataURL("image/png");e["name"]=e.document_name,e["path"]=e.document_versions.find((e=>1==e.main_file)).physical_path,e["dataUrl"]=h,e["updated_at"]=e.document_versions.find((e=>1==e.main_file))?e.document_versions.find((e=>1==e.main_file)).updated_at:e.updated_at,e["version"]=e.document_versions.find((e=>1==e.main_file))?e.document_versions.find((e=>1==e.main_file)).version_name:"",e["size"]=e.document_versions.find((e=>1==e.main_file))?parseInt(e.document_versions.find((e=>1==e.main_file)).file_size).toFixed(4):"",this.thumbnails.push(e)}catch(t){console.log("Error in fetch"),console.log(t)}},openItem(e){if("folder"==e.type)this.$router.push({name:"Repository",query:{folder_id:e.id}});else{let t=e.document_versions.find((e=>1==e.main_file)).physical_path,o=this.baseUrl+"/api/showPdf/"+t.split("/")[2],s=!0;this.$emit("show-viewer",o,s)}},highlistItem(e,t){this.isActive=t,"document"==e.type?this.$emit("update-select-document",e):this.$emit("update-current_folder",e)},showContextMenu(e,t){e.preventDefault(),this.showMenu=!0,this.targetRow=t,this.menuX=e.clientX,this.menuY=e.clientY},closeContextMenu(){this.showMenu=!1},handleActionClick(e){switch(this.closeContextMenu(),e){case"open":this.openItem(this.targetRow);break;case"bookmark":"document"==this.targetRow.type?this.bookmark_documents.includes(parseInt(this.targetRow.id))?(this.postBookMarks(this.targetRow,"document"),this.bookmark_documents=this.bookmark_documents.filter((e=>e!=this.targetRow.id))):(this.postBookMarks(this.targetRow,"document"),this.bookmark_documents.push(this.targetRow.id)):this.bookmark_folders.includes(parseInt(this.targetRow.id))?(this.postBookMarks(this.targetRow,"folder"),this.bookmark_folders=this.bookmark_folders.filter((e=>e!=this.targetRow.id))):(this.postBookMarks(this.targetRow,"folder"),this.bookmark_folders.push(this.targetRow.id));break;case"edit":if("folder"!=this.targetRow.type){this.editDocument=this.targetRow,this.showEditDocument=!0;break}this.editFolder=this.targetRow,this.showEditFolder=!0;break;case"delete":"folder"==this.targetRow.type?this.$swal.fire({title:"Are you sure?",text:"Once deleted, you will not be able to recover this Folder and All It's Contents!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",reverseButtons:!0,showLoaderOnConfirm:!0}).then((e=>{e.isConfirmed?fetch(this.baseUrl+"/api/folders/delete/"+this.targetRow.id,{method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-type":"application/json"}}).then((e=>e.json())).then((e=>{403==e.data?this.toast.error(e.message,{timeout:5e3}):(this.toast.success(e.message,{timeout:5e3}),this.$emit("get-folder",this.targetRow.parent_folder_id))})):this.toast.success("Folder is safe!",{timeout:5e3})})):this.$swal.fire({title:"Are you sure?",text:"Once deleted, you will not be able to recover this File and All It's Contents!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",reverseButtons:!0,showLoaderOnConfirm:!0}).then((e=>{e.isConfirmed?fetch(this.baseUrl+"/api/folder/documents/delete/"+this.targetRow.id,{method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-type":"application/json"}}).then((e=>e.json())).then((e=>{403==e.data?this.toast.error(e.message,{timeout:5e3}):(this.toast.success(e.message,{timeout:5e3}),this.$emit("get-folder",this.targetRow.folder_id))})):this.toast.success("Folder is safe!",{timeout:5e3})}));break;default:break}},async postBookMarks(e,t){const o=await fetch(this.baseUrl+"/api/bookmarks",{method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-type":"application/json"},data:{item_id:e.id,type:t}}),s=await o.json();console.log(s)},closeModalHandler(){this.showEditFolder=!1,this.showEditDocument=!1},refreshData(e){this.$emit("get-folder",e)},async fetchDocumentBookmarks(){try{const e=await fetch(this.baseUrl+"/api/bookmarks",{method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-type":"application/json"}}),t=await e.json();let o=t.filter((e=>"document"==e.type));return o.map((({item_id:e})=>e))}catch(e){console.error("Error fetching bookmarks:",e)}},async fetchFolderBookmarks(){try{const e=await fetch(this.baseUrl+"/api/bookmarks",{method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-type":"application/json"}}),t=await e.json();let o=t.filter((e=>"folder"==e.type));return o.map((({item_id:e})=>e))}catch(e){console.error("Error fetching bookmarks:",e)}}}},A=o(89);const R=(0,A.Z)(M,[["render",b],["__scopeId","data-v-ee13a6dc"]]);var B=R},5418:function(e,t,o){o.d(t,{Z:function(){return _e}});var s=o(3396),i=o(9242),r=o(7139);const a=e=>((0,s.dD)("data-v-6a5ccf2c"),e=e(),(0,s.Cn)(),e),n={class:"x y"},l={class:"card elevation-3"},d=a((()=>(0,s._)("div",{class:"card-header"},[(0,s._)("h3",{class:"card-title"},[(0,s._)("b",null,"Recently Viewed Folders and Documents")])],-1))),c={class:"card-body table-responsive"},h={class:"row"},m=a((()=>(0,s._)("div",{class:"col-md-9"},null,-1))),u={class:"col-md-2 ml-3"},p={class:"form-group"},k={class:"table table-hover table-bordered"},w={class:"thead-light"},f=a((()=>(0,s._)("th",null,"#",-1))),_={key:0},y=a((()=>(0,s._)("span",{class:"material-symbols-outlined col-md-2 mr-1 pr-0",style:{border:"none"}},"arrow_drop_up",-1))),b=[y],g={key:1},C=a((()=>(0,s._)("span",{class:"material-symbols-outlined col-md-2 mr-1 pr-0",style:{border:"none"}},"arrow_drop_down",-1))),v=[C],D={key:2},x=a((()=>(0,s._)("span",{class:"material-symbols-outlined col-md-2 mr-1 pr-0 comparision_icon",style:{border:"none",width:"24px",height:"24px"}},"compare_arrows",-1))),M=[x],A={key:0},R=a((()=>(0,s._)("span",{class:"material-symbols-outlined col-md-2 mr-1 pr-0",style:{border:"none"}},"arrow_drop_up",-1))),B=[R],F={key:1},E=a((()=>(0,s._)("span",{class:"material-symbols-outlined col-md-2 mr-1 pr-0",style:{border:"none"}},"arrow_drop_down",-1))),z=[E],$={key:2},O=a((()=>(0,s._)("span",{class:"material-symbols-outlined col-md-2 mr-1 pr-0 comparision_icon",style:{border:"none",width:"24px",height:"24px"}},"compare_arrows",-1))),j=[O],T={key:0},H=a((()=>(0,s._)("span",{class:"material-symbols-outlined col-md-2 mr-1 pr-0",style:{border:"none"}},"arrow_drop_up",-1))),U=[H],I={key:1},G=a((()=>(0,s._)("span",{class:"material-symbols-outlined col-md-2 mr-1 pr-0",style:{border:"none"}},"arrow_drop_down",-1))),Y=[G],S={key:2},q=a((()=>(0,s._)("span",{class:"material-symbols-outlined col-md-2 mr-1 pr-0 comparision_icon",style:{border:"none",width:"24px",height:"24px"}},"compare_arrows",-1))),Z=[q],L={key:0},P=a((()=>(0,s._)("span",{class:"material-symbols-outlined col-md-2 mr-1 pr-0",style:{border:"none"}},"arrow_drop_up",-1))),X=[P],N={key:1},V=a((()=>(0,s._)("span",{class:"material-symbols-outlined col-md-2 mr-1 pr-0",style:{border:"none"}},"arrow_drop_down",-1))),W=[V],K={key:2},J=a((()=>(0,s._)("span",{class:"material-symbols-outlined col-md-2 mr-1 pr-0 comparision_icon",style:{border:"none",width:"24px",height:"24px"}},"compare_arrows",-1))),Q=[J],ee=["onContextmenu","onClick"],te={key:0},oe={key:0,class:"material-symbols-outlined",style:{"font-size":"30px"}},se={key:1,class:"material-symbols-outlined",style:{"font-size":"30px"}},ie={key:1},re={key:0,class:"material-symbols-outlined",style:{"font-size":"30px"}},ae={key:1,class:"material-symbols-outlined",style:{"font-size":"30px"}};function ne(e,t,o,a,y,C){const x=(0,s.up)("ContextMenu"),R=(0,s.up)("EditFolder"),E=(0,s.up)("EditDocument");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",n,[(0,s._)("div",l,[d,(0,s._)("div",c,[(0,s._)("div",h,[m,(0,s._)("div",u,[(0,s._)("form",p,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>y.searchTerm=e),placeholder:"Search...",class:"form-group rounded"},null,512),[[i.nr,y.searchTerm]])])])]),(0,s._)("table",k,[(0,s._)("thead",w,[(0,s._)("tr",null,[f,(0,s._)("th",{onClick:t[1]||(t[1]=e=>C.sortBy("name"))},["name"==y.sortedColumn&&"asc"==y.sortOrder?((0,s.wg)(),(0,s.iD)("i",_,b)):"name"==y.sortedColumn&&"desc"==y.sortOrder?((0,s.wg)(),(0,s.iD)("i",g,v)):((0,s.wg)(),(0,s.iD)("i",D,M)),(0,s.Uk)(" Name ")]),(0,s._)("th",{onClick:t[2]||(t[2]=e=>C.sortBy("updated_at"))},["updated_at"==y.sortedColumn&&"asc"==y.sortOrder?((0,s.wg)(),(0,s.iD)("i",A,B)):"updated_at"==y.sortedColumn&&"desc"==y.sortOrder?((0,s.wg)(),(0,s.iD)("i",F,z)):((0,s.wg)(),(0,s.iD)("i",$,j)),(0,s.Uk)(" Date Modified ")]),(0,s._)("th",{onClick:t[3]||(t[3]=e=>C.sortBy("path"))},["path"==y.sortedColumn&&"asc"==y.sortOrder?((0,s.wg)(),(0,s.iD)("i",T,U)):"path"==y.sortedColumn&&"desc"==y.sortOrder?((0,s.wg)(),(0,s.iD)("i",I,Y)):((0,s.wg)(),(0,s.iD)("i",S,Z)),(0,s.Uk)(" path ")]),(0,s._)("th",{onClick:t[4]||(t[4]=e=>C.sortBy("size"))},["size"==y.sortedColumn&&"asc"==y.sortOrder?((0,s.wg)(),(0,s.iD)("i",L,X)):"size"==y.sortedColumn&&"desc"==y.sortOrder?((0,s.wg)(),(0,s.iD)("i",N,W)):((0,s.wg)(),(0,s.iD)("i",K,Q)),(0,s.Uk)(" Size ")])])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(C.filteredRows,((t,o)=>((0,s.wg)(),(0,s.iD)("tr",{key:o,class:(0,r.C_)({"table-active":y.isActive==o}),onContextmenu:(0,i.iM)((e=>C.showContextMenu(e,t,o)),["prevent"]),onClick:e=>C.highlistItem(t,o)},[(0,s._)("td",null,["document"==t.type?((0,s.wg)(),(0,s.iD)("span",te,[Array.isArray(y.bookmark_documents)&&y.bookmark_documents.includes(e.thumbnail.id)?((0,s.wg)(),(0,s.iD)("span",oe,"book")):((0,s.wg)(),(0,s.iD)("span",se,"insert_drive_file"))])):((0,s.wg)(),(0,s.iD)("span",ie,[Array.isArray(y.bookmark_folders)&&y.bookmark_folders.includes(e.thumbnail.id)?((0,s.wg)(),(0,s.iD)("span",re,"folder_special")):((0,s.wg)(),(0,s.iD)("span",ae,"folder"))]))]),(0,s._)("td",null,(0,r.zw)(t.name),1),(0,s._)("td",null,(0,r.zw)(new Date(t.updated_at).toLocaleString({dateStyle:"short",timeStyle:"short"})),1),(0,s._)("td",null,(0,r.zw)(t.path),1),(0,s._)("td",null,(0,r.zw)(t.size)+" MB",1)],42,ee)))),128)),y.showMenu?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"context_overlay",onClick:t[5]||(t[5]=(...e)=>C.closeContextMenu&&C.closeContextMenu(...e))})):(0,s.kq)("",!0),y.showMenu?((0,s.wg)(),(0,s.j4)(x,{key:1,actions:y.contextMenuActions,onActionClicked:C.handleActionClick,x:y.menuX,y:y.menuY},null,8,["actions","onActionClicked","x","y"])):(0,s.kq)("",!0)])])])])]),y.showEditFolder?((0,s.wg)(),(0,s.j4)(R,{key:0,editFolder:y.editFolder,onCloseModal:C.closeModalHandler,folders:o.folders,onGetFolder:C.refreshData},null,8,["editFolder","onCloseModal","folders","onGetFolder"])):(0,s.kq)("",!0),y.showEditDocument?((0,s.wg)(),(0,s.j4)(E,{key:1,editDocument:y.editDocument,onCloseModal:C.closeModalHandler,folders:o.folders,onGetFolder:C.refreshData},null,8,["editDocument","onCloseModal","folders","onGetFolder"])):(0,s.kq)("",!0)],64)}o(560);var le=o(4870),de=o(4677),ce=o(3535),he=o(6138),me=o(6733),ue=o(4806),pe=o.n(ue),ke={components:{ContextMenu:ce.Z,EditFolder:he.Z,EditDocument:me.Z},props:{documents:Array,folders:Array,pagination:Object},data(){return{toast:(0,de.pm)(),baseUrl:this.baseApiUrl,showMenu:(0,le.iH)(!1),menuX:(0,le.iH)(0),menuY:(0,le.iH)(0),targetRow:(0,le.iH)({}),contextMenuActions:(0,le.iH)([{label:"Open",action:"open"},{label:"Edit",action:"edit"},{label:"Delete",action:"delete"},{label:"Bookmark",action:"bookmark"}]),isActive:null,searchTerm:"",sortedColumn:"updated_at",sortOrder:"asc",bookmark_documents:[],bookmark_folders:[],editFolder:(0,le.iH)({}),showEditFolder:(0,le.iH)(!1),editDocument:(0,le.iH)({}),showEditDocument:(0,le.iH)(!1)}},computed:{filteredRows(){let e=[],t=this.$props.documents,o=this.$props.folders;if(this.bookmark_folders.length||this.bookmark_documents.length){if(t.forEach((e=>{e["name"]=e.document_name?e.document_name:"",e["updated_at"]=e.document_versions.find((e=>1==e.main_file))?e.document_versions.find((e=>1==e.main_file)).updated_at:e.updated_at,e["path"]=e.folder?e.folder.path+"/"+e["name"]:"",e["size"]=e.document_versions.find((e=>1==e.main_file))?parseInt(e.document_versions.find((e=>1==e.main_file)).file_size).toFixed(4):"",e["type"]="document"})),o.forEach((e=>{e["name"]=e.name?e.name:"",e["updated_at"]=e.updated_at?e.updated_at:"",e["path"]=e.path?e.path:"",e["size"]=e.documents?e.documents.length:"",e["type"]="folder"})),e=o.concat(t),this.searchTerm){const t=this.searchTerm.toLowerCase();e=e.filter((e=>Object.values(e).some((e=>e.toString().toLowerCase().includes(t)))))}this.sortedColumn&&(e=pe().orderBy(e,[this.sortedColumn],[this.sortOrder]))}return e}},mounted(){this.bookmark_documents=this.fetchDocumentBookmarks(),this.bookmark_folders=this.fetchFolderBookmarks()},methods:{highlistItem(e,t){this.isActive=t,"document"==e.type?this.$emit("update-select-document",e):this.$emit("update-current_folder",e)},showContextMenu(e,t){e.preventDefault(),this.showMenu=!0,this.targetRow=t,this.menuX=e.clientX-130,this.menuY=e.clientY-170},closeContextMenu(){this.showMenu=!1},handleActionClick(e,t){switch(this.closeContextMenu(),e){case"open":this.openItem(this.targetRow),this.highlistItem(this.targetRow,t);break;case"bookmark":if("document"==this.targetRow.type)if(this.bookmark_documents.includes(parseInt(this.targetRow.id))){this.bookmark_documents=this.bookmark_documents.filter((e=>e!=this.targetRow.id));let e=this.$props.documents.find((e=>e.id==this.targetRow.id));this.$props.documents.splice(e,1),this.postBookMarks(this.targetRow,"document")}else this.postBookMarks(this.targetRow,"document"),this.bookmark_documents.push(this.targetRow.id);else if(this.bookmark_folders.includes(parseInt(this.targetRow.id))){this.bookmark_folders=this.bookmark_folders.filter((e=>e!=this.targetRow.id));let e=this.$props.folders.find((e=>e.id==this.targetRow.id));this.$props.folders.splice(e,1),this.postBookMarks(this.targetRow,"folder")}else this.postBookMarks(this.targetRow,"folder"),this.bookmark_folders.push(this.targetRow.id);break;case"edit":if("folder"!=this.targetRow.type){this.editDocument=this.targetRow,this.showEditDocument=!0;break}this.editFolder=this.targetRow,this.showEditFolder=!0;break;case"delete":"folder"==this.targetRow.type?this.$swal.fire({title:"Are you sure?",text:"Once deleted, you will not be able to recover this Folder and All It's Contents!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",reverseButtons:!0,showLoaderOnConfirm:!0}).then((e=>{e.isConfirmed?fetch(this.baseUrl+"/api/folders/delete/"+this.targetRow.id,{method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-type":"application/json"}}).then((e=>e.json())).then((e=>{403==e.data?this.toast.error(e.message,{timeout:5e3}):(this.toast.success(e.message,{timeout:5e3}),this.$emit("get-folder",this.targetRow.parent_folder_id))})):this.toast.success("Folder is safe!",{timeout:5e3})})):this.$swal.fire({title:"Are you sure?",text:"Once deleted, you will not be able to recover this File and All It's Contents!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",reverseButtons:!0,showLoaderOnConfirm:!0}).then((e=>{e.isConfirmed?fetch(this.baseUrl+"/api/folder/documents/delete/"+this.targetRow.id,{method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-type":"application/json"}}).then((e=>e.json())).then((e=>{403==e.data?this.toast.error(e.message,{timeout:5e3}):(this.toast.success(e.message,{timeout:5e3}),this.$emit("get-folder",this.targetRow.folder_id))})):this.toast.success("Folder is safe!",{timeout:5e3})}));break;default:break}},async postBookMarks(e,t){const o=await fetch(this.baseUrl+"/api/bookmarks",{method:"POST",headers:{Authorization:`Bearer ${this.token}`,"Content-type":"application/json"},data:{item_id:e.id,type:t}}),s=await o.json();console.log(s)},sortBy(e){this.sortedColumn==e?this.sortOrder="asc"===this.sortOrder?"desc":"asc":(this.sortedColumn=e,this.sortOrder="asc")},openItem(e){if("folder"==e.type)this.$router.push({name:"Repository",query:{folder_id:e.id}});else{let t=e.document_versions.find((e=>1==e.main_file)).physical_path,o=this.baseUrl+"/api/showPdf/"+t.split("/")[2],s=!0;this.$emit("show-viewer",o,s)}},closeModalHandler(){this.showEditFolder=!1,this.showEditDocument=!1},refreshData(e){this.$emit("get-folder",e)},async fetchDocumentBookmarks(){try{const e=await fetch(this.baseUrl+"/api/bookmarks",{method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-type":"application/json"}}),t=await e.json();let o=t.filter((e=>"document"==e.type));return o.map((({item_id:e})=>e))}catch(e){console.error("Error fetching bookmarks:",e)}},async fetchFolderBookmarks(){try{const e=await fetch(this.baseUrl+"/api/bookmarks",{method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-type":"application/json"}}),t=await e.json();let o=t.filter((e=>"folder"==e.type));return o.map((({item_id:e})=>e))}catch(e){console.error("Error fetching bookmarks:",e)}}}},we=o(89);const fe=(0,we.Z)(ke,[["render",ne],["__scopeId","data-v-6a5ccf2c"]]);var _e=fe}}]);
//# sourceMappingURL=26.995e61c4.js.map