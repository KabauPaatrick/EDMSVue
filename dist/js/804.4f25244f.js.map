{"version":3,"file":"js/804.4f25244f.js","mappings":"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","sources":["webpack://edmsvue/./src/views/RecentlyviewedView.vue","webpack://edmsvue/./src/views/RecentlyviewedView.vue?9866"],"sourcesContent":["<!-- eslint-disable vue/no-unused-components -->\n<template>\n\t<!-- ... -->\n\t<div class=\"content\" :style=\"{ width: openProperties ? '65vw' : auto }\">\n\t\t<div class=\"container-fluid\">\n\t\t\t<div class=\"content y\">\n\t\t\t\t<div class=\"container-fluid px-5 py-2 bg-light rounded\">\n\t\t\t\t\t<span v-for=\"path in current_folder_path\" :key=\"path\"> > {{ path }}</span>\n\t\t\t\t</div>\n\t\t\t\t<TopNav @show-list-view=\"showListView\" @show-grid-view=\"showGridView\" @show-properties=\"showProperties\"\n\t\t\t\t\t@show-report=\"showReport\" :folders=\"folders\" @get-folder=\"refreshData\" />\n\n\t\t\t\t<ListView :documents=\"documents\" :pagination=\"pagination\" :folders=\"folders\" v-if=\"listview\"\n\t\t\t\t\t@update-select-document=\"updateSelectDocument\" @update-current_folder=\"updateCurrentFolder\"\n\t\t\t\t\t@open-folder=\"$emit('open-folder', item)\" @show-viewer=\"renderPdfViewer\" @get-folder=\"refreshData\" />\n\n\t\t\t\t<GridView :documents=\"documents\" :pagination=\"pagination\" :folders=\"folders\" v-if=\"gridview\"\n\t\t\t\t\t@open-folder=\"$emit('open-folder', item)\" @show-viewer=\"renderPdfViewer\"\n\t\t\t\t\t@update-current_folder=\"updateCurrentFolder\" @update-select-document=\"updateSelectDocument\"\n\t\t\t\t\t@get-folder=\"refreshData\" />\n\n\t\t\t\t<DocumentViewer v-if=\"showViewer\" :actual_file=\"actual_file\" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<PropertiesSideBar v-if=\"openProperties\" :style=\"{ width: openProperties ? '25vw' : '0vw' }\" @hide-sidebar=\"hideSidebar\"\n\t\t:document=\"document\" :current_folder=\"current_folder\" @get-folder=\"refreshData\" />\n</template>\n  \n\n  \n<script>\nimport ListView from \"@/components/ListViewCombined.vue\";\nimport GridView from \"@/components/GridViewCombined.vue\";\nimport TopNav from \"@/components/TopNav.vue\"\nimport PropertiesSideBar from \"@/components/PropertiesSideBar.vue\";\nimport DocumentViewer from '@/components/DocumentViewer.vue';\n\nimport { useToast } from \"vue-toastification\";\nimport { reactive } from 'vue';\n\nexport default {\n\tcomponents: {\n\t\tListView,\n\t\tGridView,\n\t\tTopNav,\n\t\tPropertiesSideBar,\n\t\tDocumentViewer\n\t},\n\tdata() {\n\t\treturn {\n\t\t\ttoast: useToast(),\n\t\t\tbaseUrl: this.baseApiUrl,\n\t\t\ttoken: localStorage.getItem(\"edms_token\"),\n\t\t\t// recent_documents: JSON.parse(localStorage.getItem(\"recent_documents\")) || [],\n\t\t\trecent_documents: [],\n\t\t\t// recent_folders: JSON.parse(localStorage.getItem(\"recent_folders\")) || [],\n\t\t\trecent_folders: [],\n\t\t\ttarget_folder: reactive(0),\n\t\t\tlistview: true,\n\t\t\tgridview: false,\n\t\t\topenProperties: false,\n\t\t\tdocuments: [],\n\t\t\tfolders: [],\n\t\t\tdocument: {},\n\t\t\tactual_file: '',\n\t\t\tshowViewer: false,\n\t\t\tpagination: {\n\t\t\t\tlinks: '',\n\t\t\t\tmeta: ''\n\t\t\t}\n\t\t};\n\t},\n\tcomputed: {\n\t\tcurrent_folder() {\n\t\t\tlet current_folder = {};\n\t\t\tif (this.target_folder > 0) {\n\t\t\t\tcurrent_folder = this.folders.find(folder => folder.id == this.target_folder) ? this.folders.find(folder => folder.id == this.target_folder) :\n\t\t\t\t\t{};\n\t\t\t}\n\t\t\treturn current_folder;\n\t\t},\n\t\tcurrent_folder_path() {\n\t\t\treturn this.current_folder.path ? this.current_folder.path.split('/') : {};\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.recent_documents = this.fetchDocumentRecents();\n\t\tthis.recent_folders = this.fetchFolderRecents();\n\t\tif (Array.isArray(this.recent_folders)) {\n\t\t\tthis.recent_folders.forEach(folder => {\n\t\t\t\tthis.getFolders(folder);\n\t\t\t});\n\t\t}\n\t\tif (Array.isArray(this.recent_documents)) {\n\t\t\tthis.recent_documents.forEach(document => {\n\t\t\t\tthis.getDocuments(document);\n\t\t\t});\n\t\t}\n\t},\n\tmethods: {\n\t\tshowGridView() {\n\t\t\tthis.listview = false;\n\t\t\tthis.gridview = true;\n\t\t\tthis.openReport = false;\n\t\t\tthis.showViewer = false;\n\t\t},\n\t\tshowListView() {\n\t\t\tthis.listview = true;\n\t\t\tthis.gridview = false;\n\t\t\tthis.openReport = false;\n\t\t\tthis.showViewer = false;\n\t\t},\n\t\tshowProperties() {\n\t\t\tthis.openProperties = true;\n\t\t},\n\t\thideSidebar() {\n\t\t\tthis.openProperties = false;\n\t\t},\n\t\tasync getFolders(target_folder) {\n\t\t\tthis.$progress.start();\n\n\t\t\tconst response = await fetch(this.baseUrl + '/api/folder/show/' + target_folder, {\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\t'Authorization': `Bearer ${this.token}`,\n\t\t\t\t\t'Content-type': 'application/json'\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst data = await response.json();\n\t\t\tif (data.success == false) {\n\t\t\t\t// Use it!\n\t\t\t\tthis.toast.error(data.message, {\n\t\t\t\t\ttimeout: 2000\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.toast.success(data.message, {\n\t\t\t\t\ttimeout: 2000\n\t\t\t\t});\n\t\t\t\tthis.folders.push(data.data.data);\n\t\t\t}\n\t\t\tthis.$progress.finish();\n\n\t\t},\n\t\tasync getDocuments(target_document) {\n\t\t\tthis.$progress.start();\n\t\t\tconst response = await fetch(this.baseUrl + '/api/folder/document/show/' + target_document, {\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\t'Authorization': `Bearer ${this.token}`,\n\t\t\t\t\t'Content-type': 'application/json'\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst data = await response.json();\n\t\t\t// console.log(data);\n\t\t\tif (data.success == false) {\n\t\t\t\t// Use it!\n\t\t\t\tthis.toast.error(data.message, {\n\t\t\t\t\ttimeout: 2000\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Use it!\n\t\t\t\tthis.toast.success(data.message, {\n\t\t\t\t\ttimeout: 2000\n\t\t\t\t});\n\t\t\t\tthis.documents.push(data.data.data);\n\t\t\t\tthis.pagination.links = data.data.links;\n\t\t\t\tthis.pagination.meta = data.data.meta;\n\t\t\t}\n\t\t\tthis.$progress.finish();\n\t\t},\n\t\tupdateSelectDocument(document) {\n\t\t\tthis.document = document;\n\t\t\tthis.updateCurrentFolder(document.folder);\n\t\t},\n\t\tupdateCurrentFolder(folder) {\n\t\t\tthis.target_folder = folder.id;\n\t\t},\n\t\trenderPdfViewer(actual_file, showViewer) {\n\t\t\tthis.actual_file = actual_file;\n\t\t\tthis.showViewer = showViewer;\n\t\t\tthis.listview = false;\n\t\t\tthis.gridview = false;\n\t\t\tthis.openReport = false;\n\t\t},\n\t\trefreshData() {\n\t\t\tthis.folders = [];\n\t\t\tthis.documents = [];\n\t\t\tthis.recent_folders.forEach(folder => {\n\t\t\t\tthis.getFolders(folder);\n\t\t\t});\n\t\t\tthis.recent_documents.forEach(document => {\n\t\t\t\tthis.getDocuments(document);\n\t\t\t});\n\t\t},\n\t\tasync fetchDocumentRecents() {\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(this.baseUrl + '/api/recent-views', {\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Authorization': `Bearer ${this.token}`,\n\t\t\t\t\t\t'Content-type': 'application/json'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconst data = await response.json();\n\t\t\t\tlet documents = data.filter(item => item.type == 'document');\n\t\t\t\treturn documents.map(({ item_id }) => item_id);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error fetching Recents:', error);\n\t\t\t\t// Handle errors gracefully\n\t\t\t}\n\t\t},\n\t\tasync fetchFolderRecents() {\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(this.baseUrl + '/api/recent-views', {\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Authorization': `Bearer ${this.token}`,\n\t\t\t\t\t\t'Content-type': 'application/json'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconst data = await response.json();\n\t\t\t\tlet folders = data.filter(item => item.type == 'folder');\n\t\t\t\treturn folders.map(({ item_id }) => item_id);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error fetching Recents:', error);\n\t\t\t\t// Handle errors gracefully\n\t\t\t}\n\t\t}\n\t},\n};\n</script>\n  \n<style scoped></style>\n  ","import { render } from \"./RecentlyviewedView.vue?vue&type=template&id=069c451e\"\nimport script from \"./RecentlyviewedView.vue?vue&type=script&lang=js\"\nexport * from \"./RecentlyviewedView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_Fragment","_createElementVNode","style","_normalizeStyle","width","$data","openProperties","_ctx","auto","_hoisted_1","_hoisted_2","_hoisted_3","_renderList","$options","current_folder_path","path","key","_toDisplayString","_createVNode","_component_TopNav","onShowListView","showListView","onShowGridView","showGridView","onShowProperties","showProperties","onShowReport","showReport","folders","onGetFolder","refreshData","listview","_createBlock","_component_ListView","documents","pagination","onUpdateSelectDocument","updateSelectDocument","onUpdateCurrent_folder","updateCurrentFolder","onOpenFolder","_cache","$event","$emit","item","onShowViewer","renderPdfViewer","_createCommentVNode","gridview","_component_GridView","showViewer","_component_DocumentViewer","actual_file","_component_PropertiesSideBar","onHideSidebar","hideSidebar","document","current_folder","components","ListView","GridView","TopNav","PropertiesSideBar","DocumentViewer","data","toast","useToast","baseUrl","this","baseApiUrl","token","localStorage","getItem","recent_documents","recent_folders","target_folder","reactive","links","meta","computed","find","folder","id","split","mounted","fetchDocumentRecents","fetchFolderRecents","Array","isArray","forEach","getFolders","getDocuments","methods","openReport","$progress","start","response","fetch","method","headers","json","success","error","message","timeout","push","finish","target_document","filter","type","map","item_id","console","__exports__","render"],"sourceRoot":""}