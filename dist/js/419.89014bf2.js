"use strict";(self["webpackChunkedmsvue"]=self["webpackChunkedmsvue"]||[]).push([[419],{2885:function(e,t,o){o.r(t),o.d(t,{default:function(){return k}});var r=o(3396),s=o(7139);const i={class:"container-fluid"},n={class:"content y"},a={class:"container-fluid px-5 py-2 bg-light rounded"};function d(e,t,o,d,l,h){const u=(0,r.up)("TopNav"),p=(0,r.up)("ListView"),c=(0,r.up)("GridView"),w=(0,r.up)("DocumentViewer"),f=(0,r.up)("PropertiesSideBar");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",{class:"content",style:(0,s.j5)({width:l.openProperties?"65vw":e.auto})},[(0,r._)("div",i,[(0,r._)("div",n,[(0,r._)("div",a,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(h.current_folder_path,(e=>((0,r.wg)(),(0,r.iD)("span",{key:e}," > "+(0,s.zw)(e),1)))),128))]),(0,r.Wm)(u,{onShowListView:h.showListView,onShowGridView:h.showGridView,onShowProperties:h.showProperties,onShowReport:e.showReport,folders:l.folders,onGetFolder:h.refreshData},null,8,["onShowListView","onShowGridView","onShowProperties","onShowReport","folders","onGetFolder"]),l.listview?((0,r.wg)(),(0,r.j4)(p,{key:0,documents:l.documents,pagination:l.pagination,folders:l.folders,onUpdateSelectDocument:h.updateSelectDocument,onUpdateCurrent_folder:h.updateCurrentFolder,onOpenFolder:t[0]||(t[0]=t=>e.$emit("open-folder",e.item)),onShowViewer:h.renderPdfViewer,onGetFolder:h.refreshData},null,8,["documents","pagination","folders","onUpdateSelectDocument","onUpdateCurrent_folder","onShowViewer","onGetFolder"])):(0,r.kq)("",!0),l.gridview?((0,r.wg)(),(0,r.j4)(c,{key:1,documents:l.documents,pagination:l.pagination,folders:l.folders,onOpenFolder:t[1]||(t[1]=t=>e.$emit("open-folder",e.item)),onShowViewer:h.renderPdfViewer,onUpdateCurrent_folder:h.updateCurrentFolder,onUpdateSelectDocument:h.updateSelectDocument,onGetFolder:h.refreshData},null,8,["documents","pagination","folders","onShowViewer","onUpdateCurrent_folder","onUpdateSelectDocument","onGetFolder"])):(0,r.kq)("",!0),l.showViewer?((0,r.wg)(),(0,r.j4)(w,{key:2,actual_file:l.actual_file},null,8,["actual_file"])):(0,r.kq)("",!0)])])],4),l.openProperties?((0,r.wg)(),(0,r.j4)(f,{key:0,style:(0,s.j5)({width:l.openProperties?"25vw":"0vw"}),onHideSidebar:h.hideSidebar,document:l.document,current_folder:h.current_folder,onGetFolder:h.refreshData},null,8,["style","onHideSidebar","document","current_folder","onGetFolder"])):(0,r.kq)("",!0)],64)}o(560);var l=o(5418),h=o(8678),u=o(3810),p=o(5509),c=o(7475),w=o(4677),f=o(4870),m={components:{ListView:l.Z,GridView:h.Z,TopNav:u.Z,PropertiesSideBar:p.Z,DocumentViewer:c.Z},data(){return{toast:(0,w.pm)(),baseUrl:this.baseApiUrl,token:localStorage.getItem("edms_token"),bookmark_folders:JSON.parse(localStorage.getItem("bookmark_folders"))||[],bookmark_documents:JSON.parse(localStorage.getItem("bookmark_documents"))||[],target_folder:(0,f.qj)(0),listview:!0,gridview:!1,openProperties:!1,documents:[],folders:[],document:{},actual_file:"",showViewer:!1,pagination:{links:"",meta:""}}},computed:{current_folder(){let e={};return this.target_folder>0&&(e=this.folders.find((e=>e.id==this.target_folder))?this.folders.find((e=>e.id==this.target_folder)):{}),e},current_folder_path(){return this.current_folder.path?this.current_folder.path.split("/"):{}}},watch:{bookmark_folders:{immediate:!0,handler(e){this.$progress.start(),e.forEach((e=>{this.getFolders(e)})),this.$progress.finish()}},bookmark_documents:{immediate:!0,handler(e){this.$progress.start(),e.forEach((e=>{this.getDocuments(e)})),this.$progress.finish()}}},methods:{showGridView(){this.listview=!1,this.gridview=!0,this.openReport=!1,this.showViewer=!1},showListView(){this.listview=!0,this.gridview=!1,this.openReport=!1,this.showViewer=!1},showProperties(){this.openProperties=!0},hideSidebar(){this.openProperties=!1},async getFolders(e){this.$progress.start();const t=await fetch(this.baseUrl+"/api/folder/show/"+e,{method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-type":"application/json"}}),o=await t.json();0==o.success?this.toast.error(o.message,{timeout:2e3}):(this.toast.success(o.message,{timeout:2e3}),this.folders.push(o.data.data)),this.$progress.finish()},async getDocuments(e){this.$progress.start();const t=await fetch(this.baseUrl+"/api/folder/document/show/"+e,{method:"GET",headers:{Authorization:`Bearer ${this.token}`,"Content-type":"application/json"}}),o=await t.json();0==o.success?this.toast.error(o.message,{timeout:2e3}):(this.toast.success(o.message,{timeout:2e3}),this.documents.push(o.data.data),this.pagination.links=o.data.links,this.pagination.meta=o.data.meta),this.$progress.finish()},updateSelectDocument(e){this.document=e,this.updateCurrentFolder(e.folder)},updateCurrentFolder(e){this.target_folder=e.id},renderPdfViewer(e,t){this.actual_file=e,this.showViewer=t,this.listview=!1,this.gridview=!1,this.openReport=!1},refreshData(){this.folders=[],this.documents=[],this.recent_folders.forEach((e=>{this.getFolders(e)})),this.recent_documents.forEach((e=>{this.getDocuments(e)}))}}},g=o(89);const _=(0,g.Z)(m,[["render",d]]);var k=_}}]);
//# sourceMappingURL=419.89014bf2.js.map